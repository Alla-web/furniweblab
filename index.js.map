{"version":3,"file":"index.js","sources":["../src/js/hero.js","../src/js/furniture-list.js","../src/js/order-modal.js"],"sourcesContent":["\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const btn = document.querySelector('.btn.btn-link');\n    const targetId = \"feedbacks\";\n\n    btn.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      const target = document.getElementById(targetId);\n\n      if (target) {\n        target.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\"\n        });\n      }\n    });\n  });","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.baseURL = 'https://furniture-store-v2.b.goit.study/api';\n\nasync function fetchCategories() {\n  try {\n    const { data: categories } = await axios('/categories');\n    return categories;\n  } catch (error) {\n    iziToast.error({\n      message: `${error.message ?? String(error)}`,\n      position: 'topCenter',\n      timeout: 3000,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      close: false,\n    });\n  }\n}\n\n//отримуємо список категорій\nfetchCategories();\n\nconst categoriesBoxes = document.querySelectorAll('.category-card');\n\nasync function renderCategories(categoriesBoxes) {\n  const categories = await fetchCategories();\n\n  [...categoriesBoxes].forEach((categoryBox, index) => {\n    if (index === 0) {\n      return;\n    }\n\n    categoryBox.dataset.id = categories[index - 1]._id;\n    categoryBox.children[0].textContent = categories[index - 1].name;\n  });\n}\n\n//промальовуємо назви категорій\nrenderCategories(categoriesBoxes);\n\n//ловимо клік по категорії\nconst furnitureListContainer = document.querySelector('.futniture-list');\nconst categoryContainer = document.querySelector('.category-container');\n\ncategoryContainer.addEventListener('click', onCategoryClick);\n\nasync function onCategoryClick(event) {\n  event.preventDefault();\n\n  const pickedCategoryCard = event.target.closest('.category-card');\n\n  if (!categoryContainer.contains(pickedCategoryCard) || !pickedCategoryCard) {\n    return;\n  }\n\n  const categoryId = pickedCategoryCard.dataset.id;\n  let itemsPage = 1;\n\n  try {\n    const { data: categoryItems } = await axios(`/furnitures`, {\n      params: {\n        page: itemsPage,\n        limit: 10,\n        category: categoryId,\n        // sortDirect: asc,\n      },\n    });\n\n    furnitureListContainer.innerHTML = renderFurnitureList(\n      categoryItems.furnitures\n    );\n  } catch (error) {\n    iziToast.error({\n      message: `${error.message ?? String(error)}`,\n      position: 'topCenter',\n      timeout: 3000,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      close: false,\n    });\n  }\n}\n\nfunction renderFurnitureList(furnitureList) {\n  return furnitureList\n    .sort((a, b) => a.price - b.price)\n    .map(\n      furniItem => `\n        <li>\n            <img class=\"card-image\" src=\"${furniItem.images[0]}\" alt=\"${\n        furniItem.name\n      }\"/>\n            <h3 class=\"card-title\">${furniItem.name}</h3>\n            <ul class=\"card-color-container\">\n                ${(furniItem.color || [])\n                  .map(\n                    color => `\n                    <li\n                    class=\"card-color-item\"\n                    style=\"background-color: ${color};\">1\n                    </li>\n                    `\n                  )\n                  .join('')}               \n            </ul>\n            <p class=\"card-price\">${furniItem.price.toLocaleString()} грн</p>\n            <button \n                class=\"details-button button\" \n                data-id=\"${furniItem._id}\">Детальніше</button>\n        </li>\n    `\n    )\n    .join('');\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst modal = document.getElementById(\"order-modal\");\nconst closeModalBtn = document.getElementById(\"closeModalBtn\");\nconst form = document.getElementById(\"callback-form\");\nlet productId = null;\nlet color = null;\n\ndocument.addEventListener(\"click\", (e) => {\n  const btn = e.target.closest(\".open-order-modal-btn\");\n  if (!btn) return;\n\n\n  productId = btn.dataset.productId;\n  color = btn.dataset.color;\n\n  modal.style.display = \"flex\";\n  document.body.style.overflow = \"hidden\";\n});\n\nfunction closeModal() {\n  modal.style.display = \"none\";\n  document.body.style.overflow = \"\";\n  form.reset();\n  clearErrors();\n}\n\ncloseModalBtn.addEventListener(\"click\", closeModal);\nmodal.addEventListener(\"click\", (e) => {\n  if (e.target === modal) closeModal();\n});\ndocument.addEventListener(\"keydown\", (e) => {\n  if (e.key === \"Escape\" && modal.style.display === \"flex\") closeModal();\n});\n\nfunction showInputError(input, message) {\n  input.style.border = \"1px solid #6b0609\";\n\n  let errorEl = input.parentNode.querySelector(\".input-error-text\");\n  if (!errorEl) {\n    errorEl = document.createElement(\"p\");\n    errorEl.classList.add(\"input-error-text\");\n    input.parentNode.appendChild(errorEl);\n  }\n  errorEl.textContent = message;\n}\n\nfunction clearErrors() {\n  document.querySelectorAll(\".input-error-text\").forEach((e) => e.remove());\n  form.querySelectorAll(\"input, textarea\").forEach((el) => {\n    el.style.border = \"1px solid rgba(8, 12, 9, 0.15)\";\n  });\n}\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  clearErrors();\n\n  const name = form.name.value.trim();\n  let phone = form.phone.value.trim();\n  const comment = form.comment.value.trim();\n\n  let hasError = false;\n\n  if (!name) {\n    showInputError(form.name, \"Error Text\");\n    hasError = true;\n  }\n\n  if (!phone || !/^\\d+$/.test(phone)) {\n    showInputError(form.phone, \"Error Text\");\n    hasError = true;\n  }\n\n  if (hasError) return;\n\n  if (phone.startsWith(\"0\")) phone = \"38\" + phone;\n\n  const orderData = {\n    name,\n    phone,\n    modelId: productId,\n    color,\n    comment: comment || \"Чекатиму на зворотний зв'язок для уточнення деталей. Дякую!\",\n  };\n\n  try {\n    const response = await fetch(\n      \"https://furniture-store-v2.b.goit.study/api/orders\",\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(orderData),\n      }\n    );\n\n    const result = await response.json();\n    console.log(\"Відповідь від сервера:\", result);\n\n    if (!response.ok) {\n      iziToast.error({\n        title: \"Помилка!\",\n        message: result.message || \"Щось пішло не так. Перевірте дані.\",\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    iziToast.success({\n      title: \"Успіх!\",\n      message: `Замовлення №${result.orderNum} успішно створено!`,\n      position: \"topRight\",\n    });\n\n    closeModal();\n  } catch (err) {\n    console.error(\"Помилка при запиті:\", err);\n    iziToast.error({\n      title: \"Помилка!\",\n      message: \"Не вдалося відправити замовлення. Спробуйте пізніше.\",\n      position: \"topRight\",\n    });\n  }\n});\n"],"names":["btn","targetId","e","target","axios","fetchCategories","categories","error","iziToast","categoriesBoxes","renderCategories","categoryBox","index","furnitureListContainer","categoryContainer","onCategoryClick","event","pickedCategoryCard","categoryId","itemsPage","categoryItems","renderFurnitureList","furnitureList","a","b","furniItem","color","modal","closeModalBtn","form","productId","closeModal","clearErrors","showInputError","input","message","errorEl","el","name","phone","comment","hasError","orderData","response","result","err"],"mappings":"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"}