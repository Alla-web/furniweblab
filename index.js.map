{"version":3,"file":"index.js","sources":["../src/js/furniture-list.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.baseURL = 'https://furniture-store-v2.b.goit.study/api';\n\nasync function fetchCategories() {\n  try {\n    const { data: categories } = await axios('/categories');\n    return categories;\n  } catch (error) {\n    iziToast.error({\n      message: `${error.message ?? String(error)}`,\n      position: 'topCenter',\n      timeout: 3000,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      close: false,\n    });\n  }\n}\n\n//отримуємо список категорій\nfetchCategories();\n\nconst categoriesBoxes = document.querySelectorAll('.category-card');\n\nasync function renderCategories(categoriesBoxes) {\n  const categories = await fetchCategories();\n\n  [...categoriesBoxes].forEach((categoryBox, index) => {\n    if (index === 0) {\n      return;\n    }\n\n    categoryBox.dataset.id = categories[index - 1]._id;\n    categoryBox.children[0].textContent = categories[index - 1].name;\n  });\n}\n\n//промальовуємо назви категорій\nrenderCategories(categoriesBoxes);\n\n//ловимо клік по категорії\nconst furnitureListContainer = document.querySelector('.futniture-list');\nconst categoryContainer = document.querySelector('.category-container');\n\ncategoryContainer.addEventListener('click', onCategoryClick);\n\nasync function onCategoryClick(event) {\n  event.preventDefault();\n\n  const pickedCategoryCard = event.target.closest('.category-card');\n\n  if (!categoryContainer.contains(pickedCategoryCard) || !pickedCategoryCard) {\n    return;\n  }\n\n  const categoryId = pickedCategoryCard.dataset.id;\n  let itemsPage = 1;\n\n  try {\n    const { data: categoryItems } = await axios(`/furnitures`, {\n      params: {\n        page: itemsPage,\n        limit: 10,\n        category: categoryId,\n        // sortDirect: asc,\n      },\n    });\n    console.log(categoryItems);\n\n    furnitureListContainer.innerHTML = renderFurnitureList(\n      categoryItems.furnitures\n    );\n  } catch (error) {\n    iziToast.error({\n      message: `${error.message ?? String(error)}`,\n      position: 'topCenter',\n      timeout: 3000,\n      backgroundColor: '#EF4040',\n      messageColor: 'white',\n      close: false,\n    });\n  }\n}\n\nfunction renderFurnitureList(furnitureList) {\n  return furnitureList\n    .map(\n      furniItem => `\n        <li data-id=\"${furniItem._id}\">\n            <img class=\"\" src=\"${furniItem.images[0]}\" alt=\"${furniItem.name}\"/>\n            <h3 class=\"\">${furniItem.name}</h3>\n            <ul class=\"\">\n                <li class=\"\" style=\"color: ${furniItem.color[0]};\"></li>\n                <li class=\"\" style=\"color: ${furniItem.color[1]};\"></li>\n                <li class=\"\" style=\"color: ${furniItem.color[2]};\"></li>\n            </ul>\n            <p class=\"\">${furniItem.price.toLocaleString()}</p>\n            <button class=\"button\">Детальніше</button>\n        </li>\n    `\n    )\n    .join('');\n}\n"],"names":["axios","fetchCategories","categories","error","iziToast","categoriesBoxes","renderCategories","categoryBox","index","furnitureListContainer","categoryContainer","onCategoryClick","event","pickedCategoryCard","categoryId","itemsPage","categoryItems","renderFurnitureList","furnitureList","furniItem"],"mappings":"wvBAKAA,EAAM,SAAS,QAAU,8CAEzB,eAAeC,GAAkB,CAC/B,GAAI,CACF,KAAM,CAAE,KAAMC,CAAU,EAAK,MAAMF,EAAM,aAAa,EACtD,OAAOE,CACR,OAAQC,EAAO,CACdC,EAAS,MAAM,CACb,QAAS,GAAGD,EAAM,SAAW,OAAOA,CAAK,CAAC,GAC1C,SAAU,YACV,QAAS,IACT,gBAAiB,UACjB,aAAc,QACd,MAAO,EACb,CAAK,CACF,CACH,CAGAF,IAEA,MAAMI,EAAkB,SAAS,iBAAiB,gBAAgB,EAElE,eAAeC,EAAiBD,EAAiB,CAC/C,MAAMH,EAAa,MAAMD,IAEzB,CAAC,GAAGI,CAAe,EAAE,QAAQ,CAACE,EAAaC,IAAU,CAC/CA,IAAU,IAIdD,EAAY,QAAQ,GAAKL,EAAWM,EAAQ,CAAC,EAAE,IAC/CD,EAAY,SAAS,CAAC,EAAE,YAAcL,EAAWM,EAAQ,CAAC,EAAE,KAChE,CAAG,CACH,CAGAF,EAAiBD,CAAe,EAGhC,MAAMI,EAAyB,SAAS,cAAc,iBAAiB,EACjEC,EAAoB,SAAS,cAAc,qBAAqB,EAEtEA,EAAkB,iBAAiB,QAASC,CAAe,EAE3D,eAAeA,EAAgBC,EAAO,CACpCA,EAAM,eAAc,EAEpB,MAAMC,EAAqBD,EAAM,OAAO,QAAQ,gBAAgB,EAEhE,GAAI,CAACF,EAAkB,SAASG,CAAkB,GAAK,CAACA,EACtD,OAGF,MAAMC,EAAaD,EAAmB,QAAQ,GAC9C,IAAIE,EAAY,EAEhB,GAAI,CACF,KAAM,CAAE,KAAMC,CAAa,EAAK,MAAMhB,EAAM,cAAe,CACzD,OAAQ,CACN,KAAMe,EACN,MAAO,GACP,SAAUD,CAEX,CACP,CAAK,EACD,QAAQ,IAAIE,CAAa,EAEzBP,EAAuB,UAAYQ,EACjCD,EAAc,UACpB,CACG,OAAQb,EAAO,CACdC,EAAS,MAAM,CACb,QAAS,GAAGD,EAAM,SAAW,OAAOA,CAAK,CAAC,GAC1C,SAAU,YACV,QAAS,IACT,gBAAiB,UACjB,aAAc,QACd,MAAO,EACb,CAAK,CACF,CACH,CAEA,SAASc,EAAoBC,EAAe,CAC1C,OAAOA,EACJ,IACCC,GAAa;AAAA,uBACIA,EAAU,GAAG;AAAA,iCACHA,EAAU,OAAO,CAAC,CAAC,UAAUA,EAAU,IAAI;AAAA,2BACjDA,EAAU,IAAI;AAAA;AAAA,6CAEIA,EAAU,MAAM,CAAC,CAAC;AAAA,6CAClBA,EAAU,MAAM,CAAC,CAAC;AAAA,6CAClBA,EAAU,MAAM,CAAC,CAAC;AAAA;AAAA,0BAErCA,EAAU,MAAM,gBAAgB;AAAA;AAAA;AAAA,KAIrD,EACA,KAAK,EAAE,CACZ"}