import{a as p,i}from"./assets/vendor-CLTxG5yw.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const d=document.getElementById("burger"),f=document.getElementById("nav"),u=document.getElementById("overlay");d.addEventListener("click",()=>{const e=f.classList.toggle("active");u.classList.toggle("active"),d.classList.toggle("active",e)});u.addEventListener("click",()=>{f.classList.remove("active"),u.classList.remove("active"),d.classList.remove("active")});document.querySelectorAll(".nav__link, .nav__btn").forEach(e=>{e.addEventListener("click",()=>{f.classList.remove("active"),u.classList.remove("active"),d.classList.remove("active")})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".btn.btn-link"),t="feedbacks";e.addEventListener("click",r=>{r.preventDefault();const s=document.getElementById(t);s&&s.scrollIntoView({behavior:"smooth",block:"start"})})});p.defaults.baseURL="https://furniture-store-v2.b.goit.study/api";async function v(){try{const{data:e}=await p("/categories");return e}catch(e){i.error({message:`${e.message??String(e)}`,position:"topCenter",timeout:3e3,backgroundColor:"#EF4040",messageColor:"white",close:!1})}}v();const C=document.querySelectorAll(".category-card");async function k(e){const t=await v();[...e].forEach((r,s)=>{s!==0&&(r.dataset.id=t[s-1]._id,r.children[0].textContent=t[s-1].name)})}k(C);const S=document.querySelector(".futniture-list"),h=document.querySelector(".category-container");h.addEventListener("click",w);async function w(e){e.preventDefault();const t=e.target.closest(".category-card");if(!h.contains(t)||!t)return;const r=t.dataset.id;let s=1;try{const{data:o}=await p("/furnitures",{params:{page:s,limit:10,category:r}});S.innerHTML=x(o.furnitures)}catch(o){i.error({message:`${o.message??String(o)}`,position:"topCenter",timeout:3e3,backgroundColor:"#EF4040",messageColor:"white",close:!1})}}function x(e){return e.sort((t,r)=>t.price-r.price).map(t=>`
        <li>
            <img class="card-image" src="${t.images[0]}" alt="${t.name}"/>
            <h3 class="card-title">${t.name}</h3>
            <ul class="card-color-container">
                ${(t.color||[]).map(r=>`
                    <li
                    class="card-color-item"
                    style="background-color: ${r};">1
                    </li>
                    `).join("")}               
            </ul>
            <p class="card-price">${t.price.toLocaleString()} грн</p>
            <button 
                class="details-button button" 
                data-id="${t._id}">Детальніше</button>
        </li>
    `).join("")}const l=document.getElementById("order-modal"),I=document.getElementById("closeModalBtn"),a=document.getElementById("callback-form");let b=null,E=null;document.addEventListener("click",e=>{const t=e.target.closest(".open-order-modal-btn");t&&(b=t.dataset.productId,E=t.dataset.color,l.style.display="flex",document.body.style.overflow="hidden")});function m(){l.style.display="none",document.body.style.overflow="",a.reset(),L()}I.addEventListener("click",m);l.addEventListener("click",e=>{e.target===l&&m()});document.addEventListener("keydown",e=>{e.key==="Escape"&&l.style.display==="flex"&&m()});function y(e,t){e.style.border="1px solid #6b0609";let r=e.parentNode.querySelector(".input-error-text");r||(r=document.createElement("p"),r.classList.add("input-error-text"),e.parentNode.appendChild(r)),r.textContent=t}function L(){document.querySelectorAll(".input-error-text").forEach(e=>e.remove()),a.querySelectorAll("input, textarea").forEach(e=>{e.style.border="1px solid rgba(8, 12, 9, 0.15)"})}a.addEventListener("submit",async e=>{e.preventDefault(),L();const t=a.name.value.trim();let r=a.phone.value.trim();const s=a.comment.value.trim();let o=!1;if(t||(y(a.name,"Error Text"),o=!0),(!r||!/^\d+$/.test(r))&&(y(a.phone,"Error Text"),o=!0),o)return;r.startsWith("0")&&(r="38"+r);const n={name:t,phone:r,modelId:b,color:E,comment:s||"Чекатиму на зворотний зв'язок для уточнення деталей. Дякую!"};try{const c=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),g=await c.json();if(console.log("Відповідь від сервера:",g),!c.ok){i.error({title:"Помилка!",message:g.message||"Щось пішло не так. Перевірте дані.",position:"topRight"});return}i.success({title:"Успіх!",message:`Замовлення №${g.orderNum} успішно створено!`,position:"topRight"}),m()}catch(c){console.error("Помилка при запиті:",c),i.error({title:"Помилка!",message:"Не вдалося відправити замовлення. Спробуйте пізніше.",position:"topRight"})}});
//# sourceMappingURL=index.js.map
